(this["webpackJsonpcloud-music"]=this["webpackJsonpcloud-music"]||[]).push([[0],{72:function(n,e,t){"use strict";t.r(e);var o={};t.r(o),t.d(o,"changeBannerList",(function(){return F})),t.d(o,"changeRecommendList",(function(){return K})),t.d(o,"getBannerList",(function(){return Q})),t.d(o,"getRecommendList",(function(){return Z}));var i,c,r,a,s,l,d,f,b=t(0),u=t.n(b),p=t(17),h=t.n(p),j=t(19),m=t(18),x=t(14),g=t(4),O=t(5),v=Object(O.a)(i||(i=Object(g.a)(["\n@font-face {\n  font-family: 'iconfont';\n  src: url('/iconfont/iconfont.ttf?t=1630588547146') format('truetype');\n}\n\n.iconfont {\n  font-family: \"iconfont\" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n"]))),w=t(3),y={"theme-color":"#d44439","theme-color-shadow":"rgba (212, 68, 57, .5)","font-color-light":"#f1f1f1","font-color-desc":"#2E3030","font-color-desc-v2":"#bba8a8","font-size-ss":"10px","font-size-s":"12px","font-size-m":"14px","font-size-l":"16px","font-size-ll":"18px","border-color":"#e4e4e4","background-color":"#f2f3f4","background-color-shadow":"rgba (0, 0, 0, 0.3)","highlight-background-color":"#fff",extendClick:function(){return"\n        position: relative;\n        &:before {\n            content: '',\n            position: absolute;\n            top: -10px;\n            bottom: -10px;\n            left: -10px;\n            right: -10px;\n        }\n    "},noWrap:function(){return"\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    "}},k=t(1),L=O.b.div(c||(c=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 5px 10px;\n  background: ",";\n  & > span {\n    line-height: 40px;\n    color: #f1f1f1;\n    font-size: 20px;\n    &.iconfont {\n      font-size: 25px;\n    }\n  }\n"])),y["theme-color"]),N=O.b.div(r||(r=Object(g.a)(["\n  height: 44px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  background: ",";\n  a {\n    flex: 1;\n    padding: 2px 0;\n    font-size: 14px;\n    color: #e4e4e4;\n    &.selected {\n      span {\n        padding: 3px 0;\n        font-weight: 700;\n        color: #f1f1f1;\n        border-bottom: 2px solid #f1f1f1;\n      }\n    }\n  }\n"])),y["theme-color"]),E=O.b.div(a||(a=Object(g.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),z=function(n){if(!(n<0))return n<1e4?n:Math.floor(n/1e4)<1e4?Math.floor(n/1e3)/10+"\u4e07":Math.floor(n/1e7)/10+"\u4ebf"},D=O.b.div(s||(s=Object(g.a)(["\n  max-width: 100%;\n  .title {\n    font-weight: 700;\n    padding-left: 6px;\n    font-size: 14px;\n    line-height: 60px;\n  }\n"]))),S=O.b.div(l||(l=Object(g.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]))),R=O.b.div(d||(d=Object(g.a)(["\n  position: relative;\n  width: 32%;\n\n  .image-wrapper {\n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0, 0%, 43%, 0.4), hsla(0, 0%, 100%, 0));\n    }\n    position: relative;\n    height: 0;\n    padding-bottom: 100%;\n    .play-count {\n      position: absolute;\n      right: 2px;\n      top: 2px;\n      font-size: ",";\n      line-height: 15px;\n      color: ",";\n      .play {\n        vertical-align: top;\n      }\n    }\n    img {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      border-radius: 3px;\n    }\n  }\n  .desc {\n    overflow: hidden;\n    margin-top: 2px;\n    padding: 0 2px;\n    height: 50px;\n    text-align: left;\n    font-size: ",";\n    line-height: 1.4;\n    color: ",";\n  }\n"])),y["font-size-s"],y["font-color-light"],y["font-size-s"],y["font-color-desc"]),B=u.a.memo((function(n){var e=n.recommendList;return Object(k.jsxs)(D,{children:[Object(k.jsx)("h1",{className:"title",children:"\u63a8\u8350\u6b4c\u5355"}),Object(k.jsx)(S,{children:e.map((function(n){return Object(k.jsxs)(R,{children:[Object(k.jsxs)("div",{className:"image-wrapper",children:[Object(k.jsx)("img",{src:n.picUrl,alt:"\u63a8\u8350",height:"100%",width:"100%"}),Object(k.jsx)("div",{className:"decorate"}),Object(k.jsxs)("div",{className:"play-count",children:[Object(k.jsx)("i",{className:"iconfont play",children:"\ue885"}),Object(k.jsx)("span",{className:"count",children:z(n.playCount)})]})]}),Object(k.jsx)("div",{className:"desc",children:n.name})]},n.id)}))})]})})),_=t(20),q=t(39),C=O.b.div(f||(f=Object(g.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n"]))),M=Object(b.forwardRef)((function(n,e){var t=n.direction,o=n.click,i=n.refresh,c=n.onScroll,r=n.pullUp,a=n.pullDown,s=n.bounceTop,l=n.bounceBottom,d=Object(b.useState)(null),f=Object(_.a)(d,2),u=f[0],p=f[1],h=Object(b.useRef)();return Object(b.useEffect)((function(){var n=new q.a(h.current,{scrollX:"horizental"===t,scrollY:"vertical"===t,probeType:3,click:o,bounce:{top:s,bottom:l}});return p(n),function(){p(null)}}),[]),Object(b.useEffect)((function(){i&&u&&u.refresh()})),Object(b.useEffect)((function(){if(u&&c)return u.on("scroll",c),function(){u.off(c)}}),[c,u]),Object(b.useEffect)((function(){if(u&&r)return u.on("scrollEnd",(function(){u.y<=u.maxScrollY+100&&r()})),function(){u.off("scrollEnd")}}),[r,u]),Object(b.useEffect)((function(){if(u&&a)return u.on("touchEnd",(function(n){n.y<=50&&a()})),function(){u.off("scrollEnd")}}),[a,u]),Object(b.useImperativeHandle)(e,(function(){return{refresh:function(){u&&(u.refresh(),u.scrollTo(0,0))},getBScroll:function(){return u||void 0}}})),Object(k.jsx)(C,{ref:h,children:n.children})}));M.defaultProps={direction:"vertical",click:!0,refresh:!0,onScroll:null,pullDown:null,pullUp:null,pullDownLoading:!0,pullUpLoading:!0,bounceTop:!0,bounceBottom:!0};var T,U=t(42),I=(t(53),O.b.div(T||(T=Object(g.a)(["\n  position: relative;\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  background: white;\n  .before {\n    position: absolute;\n    top: -300px;\n    height: 400px;\n    width: 100%;\n    background: ",";\n  }\n  .slider-container {\n    position: relative;\n    width: 98%;\n    height: 160px;\n    overflow: hidden;\n    margin: auto;\n    border-radius: 6px;\n    .slider-nav {\n      position: absolute;\n      display: block;\n      width: 100%;\n      height: 100%;\n    }\n    .swiper-pagination-bullet-active {\n      background: ",";\n    }\n  }\n"])),y["theme-color"],y["theme-color"])),A=u.a.memo((function(n){var e=n.bannerList,t=Object(b.useState)(null),o=Object(_.a)(t,2),i=o[0],c=o[1];return Object(b.useEffect)((function(){if(e.length&&!i){var n=new U.a(".slider-container",{loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination"}});c(n)}}),[e.length,i]),Object(k.jsxs)(I,{children:[Object(k.jsx)("div",{className:"before"}),Object(k.jsxs)("div",{className:"slider-container",children:[Object(k.jsx)("div",{className:"swiper-wrapper",children:e.map((function(n){return Object(k.jsx)("div",{className:"swiper-slide",children:Object(k.jsx)("div",{className:"slider-nav",children:Object(k.jsx)("img",{src:n.imageUrl,alt:"test",width:"100%",height:"100%"})})},n.imageUrl)}))}),Object(k.jsx)("div",{className:"swiper-pagination"})]})]})})),H=t(16),J="recommend/CHANGE_BANNER",X="recommend/CHANGE_RECOMMEND_LIST",G=Object(H.a)({bannerList:[],recommendList:[]});var P=t(40),W=t.n(P).a.create({baseURL:"https://xunserver-music.vercel.app/"});W.interceptors.response.use((function(n){return n.data}));var Y,V,F=function(n){return{type:J,data:Object(H.a)(n)}},K=function(n){return{type:X,data:Object(H.a)(n)}},Q=function(){return function(n){W.get("/banner").then((function(e){n(F(e.banners))})).catch(console.log)}},Z=function(){return function(n){W.get("/personalized").then((function(e){n(K(e.result))})).catch(console.log)}},$=O.b.div(Y||(Y=Object(g.a)(["\n  position: fixed;\n  top: 90px;\n  bottom: 0;\n  width: 100%;\n"]))),nn=function(n){var e=n.bannerList,t=n.recommendList,o=n.getBannerDataDispatch,i=n.getRecommendDataDispatch;Object(b.useEffect)((function(){o(),i()}),[]);var c=e?e.toJS():[],r=t?t.toJS():[];return Object(k.jsx)($,{children:Object(k.jsx)(M,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(A,{bannerList:c}),Object(k.jsx)(B,{recommendList:r})]})})})},en=[{path:"/",component:function(n){var e=n.route;return Object(k.jsxs)("div",{children:[Object(k.jsxs)(L,{children:[Object(k.jsx)("span",{className:"iconfont menu",children:"\ue65c"}),Object(k.jsx)("span",{className:"title",children:"WebApp"}),Object(k.jsx)("span",{className:"iconfont search",children:"\ue62b"})]}),Object(k.jsxs)(N,{children:[Object(k.jsx)(x.b,{to:"/recommend",activeClassName:"selected",children:Object(k.jsx)(E,{children:Object(k.jsx)("span",{children:" \u63a8\u8350 "})})}),Object(k.jsx)(x.b,{to:"/singers",activeClassName:"selected",children:Object(k.jsx)(E,{children:Object(k.jsx)("span",{children:" \u6b4c\u624b "})})}),Object(k.jsx)(x.b,{to:"/rank",activeClassName:"selected",children:Object(k.jsx)(E,{children:Object(k.jsx)("span",{children:" \u6392\u884c\u699c "})})})]}),Object(m.a)(e.routes)]})},routes:[{path:"/",exact:!0,render:function(){return Object(k.jsx)(w.a,{to:"recommend"})}},{path:"/recommend",component:nn=Object(j.b)((function(n){return{bannerList:n.recommend.get("bannerList"),recommendList:n.recommend.get("recommendList")}}),(function(n){return{getBannerDataDispatch:function(){n(o.getBannerList())},getRecommendDataDispatch:function(){n(o.getRecommendList())}}}))(u.a.memo(nn))},{path:"/singers",component:function(){return Object(k.jsx)("div",{children:"Singers"})}},{path:"/rank",component:function(){return Object(k.jsx)("div",{children:"Rank"})}}]}],tn=t(15),on=t(41),cn=Object(tn.b)({recommend:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case J:return n.set("bannerList",e.data);case X:return n.set("recommendList",e.data);default:return n}}}),rn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tn.c,an=Object(tn.d)(cn,rn(Object(tn.a)(on.a))),sn=Object(O.a)(V||(V=Object(g.a)(["\n\thtml, body, div, span, applet, object, iframe,\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\n\ta, abbr, acronym, address, big, cite, code,\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\n\tsmall, strike, strong, sub, sup, tt, var,\n\tb, u, i, center,\n\tdl, dt, dd, ol, ul, li,\n\tfieldset, form, label, legend,\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\n\tarticle, aside, canvas, details, embed, \n\tfigure, figcaption, footer, header, hgroup, \n\tmenu, nav, output, ruby, section, summary,\n\ttime, mark, audio, video {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tborder: 0;\n\t\tfont-size: 100%;\n\t\tfont: inherit;\n\t\tvertical-align: baseline;\n\t}\n\t/* HTML5 display-role reset for older browsers */\n\tarticle, aside, details, figcaption, figure, \n\tfooter, header, hgroup, menu, nav, section {\n\t\tdisplay: block;\n\t}\n\tbody {\n\t\tline-height: 1;\n\t}\n\thtml, body {\n\t\tbackground: #f2f3f4;;\n\t}\n\tol, ul {\n\t\tlist-style: none;\n\t}\n\tblockquote, q {\n\t\tquotes: none;\n\t}\n\tblockquote:before, blockquote:after,\n\tq:before, q:after {\n\t\tcontent: '';\n\t\tcontent: none;\n\t}\n\ttable {\n\t\tborder-collapse: collapse;\n\t\tborder-spacing: 0;\n\t}\n\ta {\n\t\ttext-decoration: none;\n\t\tcolor: #fff;\n\t}\n"])));function ln(){return Object(k.jsxs)(j.a,{store:an,children:[Object(k.jsx)(sn,{}),Object(k.jsx)(v,{}),Object(k.jsx)(x.a,{children:Object(m.a)(en)})]})}h.a.render(Object(k.jsx)(u.a.StrictMode,{children:Object(k.jsx)(ln,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.e70e0660.chunk.js.map